name: Push Release Notes to Beamer

on:
  workflow_dispatch

jobs:
  push-release-notes:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v2

      - name: Get latest release
        id: latest_release
        run: |
          API_URL="https://api.github.com/repos/solankirishav21/published_test/releases/latest"
          LATEST_RELEASE=$(curl -s -H "Authorization: Bearer ${{ secrets.MY_TOKEN }}" $API_URL)
          RELEASE_TAG=$(echo $LATEST_RELEASE | jq -r '.tag_name')
          RELEASE_BODY=$(echo $LATEST_RELEASE | jq -r '.body')
          echo "RELEASE_TAG=${RELEASE_TAG}" >> $GITHUB_ENV
          echo "RELEASE_BODY=${RELEASE_BODY}" >> $GITHUB_ENV

      - name: Print result
        run: |
          echo "Tag name: ${{ env.RELEASE_TAG }}"
          echo "Release body: ${{ env.RELEASE_BODY }}"
