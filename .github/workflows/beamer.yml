name: Push Release Notes to Beamer

on:
  workflow_dispatch

jobs:
  push-release-notes:
    runs-on: ubuntu-latest
    steps:
      - name: Print Tag Name and Description
        run: |
          echo "Tag Name: V.2.0.1.19"
          echo "Description: <ul>"
          echo "<li>It’s common practice to prefix your version names with the letter v.</li>"
          echo "<li>Some good tag names might be v1.0.0 or v2.3.4.</li>"
          echo "<li>If the tag isn’t meant for production use, add a pre-release version after the version name.</li>"
          echo "<li>Some good pre-release versions might be v0.2.0-alpha or v5.9-beta.3.</li>"
          echo "</ul>"

      - name: Push Release Notes to Beamer
        env:
          BEAMER_API_TOKEN: ${{ secrets.BEAMER_API_KEY }}
          RELEASE_TAG: V.2.0.1.19
          RELEASE_NOTES: |
            <ul>
            <li>It’s common practice to prefix your version names with the letter v.</li>
            <li>Some good tag names might be v1.0.0 or v2.3.4.</li>
            <li>If the tag isn’t meant for production use, add a pre-release version after the version name.</li>
            <li>Some good pre-release versions might be v0.2.0-alpha or v5.9-beta.3.</li>
            </ul>
        run: |
          # Push release notes to Beamer
          curl --request POST \
            --url https://api.getbeamer.com/v0/posts \
            --header "Content-Type: application/json" \
            --header "Beamer-Api-Key: $BEAMER_API_TOKEN" \
            --data "{
              \"title\": [ \"New Release: $RELEASE_TAG\" ],
              \"content\": [ \"$RELEASE_NOTES\" ],
              \"category\": \"new\",
              \"publish\": true
            }"
