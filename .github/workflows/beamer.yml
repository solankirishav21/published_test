name: Push Release Notes to Beamer

on:
  workflow_dispatch

jobs:
  push-release-notes:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v1
      - name: Get Latest Release ID
        id: latest_release
        run: |
          release_id=$(curl -sH "Authorization: Bearer ${{ github.token }}" \
            "https://api.github.com/repos/${{ github.repository }}/releases/latest" \
            | jq -r '.id')
          echo "::set-output name=id::$release_id"
      - name: Get Release Notes
        id: release_notes
        run: |
          release_body=$(curl -sH "Authorization: Bearer ${{ github.token }}" \
            "https://api.github.com/repos/${{ github.repository }}/releases/${{ steps.latest_release.outputs.id }}" \
            | jq -r '.body')
          echo "::set-output name=notes::$release_body"
      - name: Print result
        run: |
          echo "Latest Release ID: ${{ steps.latest_release.outputs.id }}"
          echo "tag_name: ${{ steps.last_release.outputs.tag_name }}"
          echo "Release Notes:"
          echo "${{ steps.release_notes.outputs.notes }}"
